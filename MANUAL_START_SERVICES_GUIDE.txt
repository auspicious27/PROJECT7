â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  MANUAL SERVICES START GUIDE - STEP BY STEP           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Instance Running: YOUR_INSTANCE_ID
âœ… Public IP: YOUR_INSTANCE_IP

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ STEP 1: AWS Console se Connect Karein
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Browser mein jao: https://console.aws.amazon.com/ec2
2. Left sidebar mein "Instances" click karo
3. Instance select karo: YOUR_INSTANCE_ID
4. Top par "Connect" button click karo
5. "EC2 Instance Connect" tab select karo
6. "Connect" button click karo
7. Terminal open ho jayega!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ STEP 2: Complete Script Run Karein
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Terminal mein yeh complete script copy-paste karo:

cd /home/ec2-user

# Clone repo if not exists
if [ ! -d "devops-project-7" ]; then
    git clone https://github.com/JibbranAli/devops-project-7.git
fi

cd devops-project-7

# Fix requirements for Python 3.7
cat > requirements.txt <<'REQEOF'
flask==2.3.3
scikit-learn==1.3.2
numpy==1.24.3
pandas==2.0.3
streamlit==1.28.0
prometheus-client==0.19.0
requests==2.31.0
pytest==7.4.3
joblib==1.3.2
REQEOF

# Install Python dependencies
pip3 install --user --upgrade pip || true
pip3 install --user -r requirements.txt || pip3 install --user flask==2.3.3 scikit-learn==1.3.2 numpy==1.24.3 pandas==2.0.3 streamlit==1.28.0 prometheus-client==0.19.0 requests==2.31.0 pytest==7.4.3 joblib==1.3.2

# Install Docker if not installed
if ! command -v docker &> /dev/null; then
    sudo yum install -y docker
    sudo systemctl start docker
    sudo systemctl enable docker
    sudo usermod -aG docker ec2-user
fi

# Install Docker Compose if not installed
if ! command -v docker-compose &> /dev/null; then
    sudo curl -L "https://github.com/docker/compose/releases/download/v2.23.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
    sudo chmod +x /usr/local/bin/docker-compose
    sudo ln -sf /usr/local/bin/docker-compose /usr/bin/docker-compose
fi

# Wait for Docker
sleep 5

# Train models if not exists
if [ ! -f "app/models/model_v1.pkl" ]; then
    python3 app/train_model.py || echo "Model training failed, continuing..."
fi

# Stop existing services
sudo docker-compose down 2>/dev/null || true

# Build services
sudo docker-compose build || (sleep 5 && sudo docker-compose build)

# Start services
sudo docker-compose up -d

# Wait for services
sleep 15

# Check status
sudo docker-compose ps

# Get Jenkins password
if [ -f /var/lib/jenkins/secrets/initialAdminPassword ]; then
    echo "=========================================="
    echo "JENKINS PASSWORD:"
    sudo cat /var/lib/jenkins/secrets/initialAdminPassword
    echo "=========================================="
fi

# Get public IP
PUBLIC_IP=$(curl -s http://169.254.169.254/latest/meta-data/public-ipv4)

echo ""
echo "=========================================="
echo "âœ… ALL SERVICES STARTED!"
echo "=========================================="
echo ""
echo "Service URLs:"
echo "  Web UI:     http://$PUBLIC_IP:8501"
echo "  API:        http://$PUBLIC_IP:5000"
echo "  Prometheus: http://$PUBLIC_IP:9090"
echo "  Jenkins:    http://$PUBLIC_IP:8080"
echo ""
echo "Test API:"
echo "  curl http://$PUBLIC_IP:5000/health"
echo ""

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ STEP 3: Services Check Karein
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Script complete hone ke baad, yeh commands run karo:

# Check service status
sudo docker-compose ps

# Check logs if needed
sudo docker-compose logs flask-api
sudo docker-compose logs streamlit-ui

# Test API
curl http://YOUR_INSTANCE_IP:5000/health

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ STEP 4: Browser Mein URLs Open Karein
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Services start hone ke baad, yeh URLs browser mein open karo:

1. Web UI:     http://YOUR_INSTANCE_IP:8501
2. API:        http://YOUR_INSTANCE_IP:5000
3. Prometheus: http://YOUR_INSTANCE_IP:9090
4. Jenkins:    http://YOUR_INSTANCE_IP:8080

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”‘ JENKINS PASSWORD:

Script run karne ke baad, terminal mein Jenkins password 
dikhega. Agar nahi dikha to yeh command run karo:

sudo cat /var/lib/jenkins/secrets/initialAdminPassword

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸  TROUBLESHOOTING:

Agar services start nahi hui:

1. Check Docker status:
   sudo systemctl status docker

2. Check logs:
   sudo docker-compose logs

3. Restart services:
   sudo docker-compose restart

4. Rebuild if needed:
   sudo docker-compose down
   sudo docker-compose build --no-cache
   sudo docker-compose up -d

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… EXPECTED OUTPUT:

Script complete hone ke baad aapko dikhna chahiye:

âœ… Service Status showing all containers "Up"
âœ… Jenkins Password displayed
âœ… All Service URLs displayed

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

